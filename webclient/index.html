<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400..700;1,400..700&display=swap"
      rel="stylesheet" />
    <title>EcoTech Supplies - Sustainable Technology Solutions</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <!-- Header Section -->
    <header>
      <div class="header-container">
        <div class="header-top">
          <div class="logo">EcoTech Supplies</div>
          <div class="user-info">
            <span id="userDisplay">Welcome, Guest</span>
            <button id="loginBtn" onclick="showModal('loginModal')">Login</button>
            <button id="registerBtn" onclick="showModal('registerModal')">Register</button>
            <button id="logoutBtn" style="display: none" onclick="logout()">Logout</button>
            <div class="cart-icon" onclick="showSection('cart')">
              üõí <span class="cart-count" id="cartCount">0</span>
            </div>
          </div>
        </div>
        <nav>
          <ul>
            <li><a href="#" onclick="showSection('home')" class="active">Home</a></li>
            <li><a href="#" onclick="showSection('products')">Products</a></li>
            <li><a href="#" onclick="showSection('cart')">Shopping Cart</a></li>
            <li><a href="#" onclick="showSection('account')">My Account</a></li>
            <li>
              <a href="#" onclick="showSection('admin')" id="adminLink" style="display: none"
                >Admin Panel</a
              >
            </li>
            <li><a href="#" onclick="showSection('help')">Help</a></li>
          </ul>
        </nav>
      </div>
    </header>

    <!-- Main Content Area -->
    <main>
      <!-- Home Section -->
      <section id="home" class="active">
        <div class="card">
          <h2>Welcome to EcoTech Supplies</h2>
          <p>
            Your trusted source for sustainable and eco-friendly technology products in Australia.
          </p>
          <h3>Our Mission</h3>
          <p>
            To make sustainable technology accessible and affordable while reducing environmental
            impact.
          </p>
          <h3>Why Choose EcoTech?</h3>
          <ul style="margin-left: 2rem; margin-top: 1rem">
            <li>üå± 100% eco-friendly and sustainable products</li>
            <li>‚ôªÔ∏è Support for e-waste recycling initiatives</li>
            <li>üöö Carbon-neutral shipping across Australia</li>
            <li>üíö Committed to environmental responsibility</li>
            <li>‚≠ê Award-winning customer service</li>
          </ul>
        </div>

        <div class="card">
          <h2>Featured Categories</h2>
          <div class="product-grid" id="featuredCategories">
            <!-- Categories will be loaded here -->
          </div>
        </div>

        <div class="card">
          <h2>Company Information</h2>
          <p><strong>EcoTech Supplies Pty Ltd</strong></p>
          <p>üìç 12 Greenway Boulevard, Perth, WA 6000</p>
          <p>üìû (08) 9123 4567</p>
          <p>‚úâÔ∏è contact@ecotech.com.au</p>
          <p>üåê www.ecotech.com.au</p>
        </div>
      </section>

      <!-- Products Section -->
      <section id="products">
        <div class="card">
          <h2>Product Catalog</h2>
          <div class="search-container">
            <input
              type="text"
              id="searchInput"
              placeholder="Search products..."
              onkeyup="searchProducts()" />
            <select id="categoryFilter" onchange="filterByCategory()">
              <option value="">All Categories</option>
            </select>
            <button class="btn" onclick="searchProducts()">Search</button>
          </div>
          <div class="loading" id="productsLoading">
            <div class="spinner"></div>
            <p>Loading products...</p>
          </div>
          <div class="product-grid" id="productGrid">
            <!-- Products will be loaded here -->
          </div>
        </div>
      </section>

      <!-- Shopping Cart Section -->
      <section id="cart">
        <div class="card">
          <h2>Shopping Cart</h2>
          <div id="cartMessage"></div>
          <div class="cart-items" id="cartItems">
            <!-- Cart items will be loaded here -->
          </div>
          <div class="cart-total" id="cartTotal">Total: $0.00</div>
          <div style="margin-top: 2rem; text-align: right">
            <button class="btn btn-danger" onclick="clearCart()">Clear Cart</button>
            <button class="btn" onclick="checkout()" id="checkoutBtn">Checkout</button>
          </div>
        </div>
      </section>

      <!-- Account Section -->
      <section id="account">
        <div class="card">
          <h2>My Account</h2>
          <div id="accountContent">
            <p>Please login to view your account details.</p>
          </div>
        </div>
      </section>

      <!-- Admin Panel Section -->
      <section id="admin">
        <div class="card">
          <h2>Admin Panel</h2>
          <div id="adminContent">
            <div
              style="
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 1rem;
                margin-bottom: 2rem;
              ">
              <button class="btn" onclick="showAdminSection('products')">Manage Products</button>
              <button class="btn" onclick="showAdminSection('users')">Manage Users</button>
              <button class="btn" onclick="showAdminSection('orders')">View Orders</button>
              <button class="btn" onclick="showAdminSection('add-product')">Add New Product</button>
            </div>
            <div id="adminWorkArea">
              <!-- Admin content will be loaded here -->
            </div>
          </div>
        </div>
      </section>

      <!-- Help Section -->
      <section id="help">
        <div class="card">
          <h2>Help & Instructions</h2>
          <h3>How to Use EcoTech Supplies</h3>
          <ol style="margin-left: 2rem; line-height: 2">
            <li>
              <strong>Browsing Products:</strong> Navigate to the Products page to view our complete
              catalog. You can search by keyword or filter by category.
            </li>
            <li>
              <strong>Adding to Cart:</strong> Click "Add to Cart" on any product to add it to your
              shopping cart.
            </li>
            <li>
              <strong>Registration:</strong> Create an account to access additional features like
              order tracking and purchase history.
            </li>
            <li>
              <strong>Checkout:</strong> Registered users can complete purchases through our secure
              checkout process.
            </li>
            <li>
              <strong>Staff Access:</strong> Staff members can login to access the Admin Panel for
              product and user management.
            </li>
          </ol>

          <h3>Account Types</h3>
          <ul style="margin-left: 2rem; line-height: 2">
            <li><strong>Visitors:</strong> Can browse products and add items to cart</li>
            <li>
              <strong>Registered Customers:</strong> Can make purchases and manage their account
            </li>
            <li><strong>Staff Members:</strong> Can manage products, users, and view orders</li>
          </ul>

          <h3>Contact Support</h3>
          <p>If you need assistance, please contact us at:</p>
          <p>üìß support@ecotech.com.au</p>
          <p>üìû (08) 9123 4567</p>
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer>
      <div class="footer-content">
        <p>&copy; 2025 EcoTech Supplies Pty Ltd. All rights reserved.</p>
        <div class="footer-links">
          <a href="#">Privacy Policy</a>
          <a href="#">Terms of Service</a>
          <a href="#">Sustainability</a>
          <a href="#">Contact Us</a>
        </div>
      </div>
    </footer>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Login</h2>
          <span class="close-modal" onclick="closeModal('loginModal')">&times;</span>
        </div>
        <div id="loginMessage"></div>
        <form id="loginForm" onsubmit="login(event)">
          <div class="form-group">
            <label for="loginUsername">Username</label>
            <input type="text" id="loginUsername" required />
          </div>
          <div class="form-group">
            <label for="loginPassword">Password</label>
            <input type="password" id="loginPassword" required />
          </div>
          <button type="submit" class="btn">Login</button>
        </form>
      </div>
    </div>

    <!-- Registration Modal -->
    <div id="registerModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Register</h2>
          <span class="close-modal" onclick="closeModal('registerModal')">&times;</span>
        </div>
        <div id="registerMessage"></div>
        <form id="registerForm" onsubmit="register(event)">
          <div class="form-group">
            <label for="regUsername">Username</label>
            <input type="text" id="regUsername" required pattern="[a-zA-Z0-9]{3,20}" />
          </div>
          <div class="form-group">
            <label for="regEmail">Email</label>
            <input type="email" id="regEmail" required />
          </div>
          <div class="form-group">
            <label for="regPassword">Password</label>
            <input type="password" id="regPassword" required minlength="4" />
          </div>
          <div class="form-group">
            <label for="regFirstName">First Name</label>
            <input type="text" id="regFirstName" required />
          </div>
          <div class="form-group">
            <label for="regLastName">Last Name</label>
            <input type="text" id="regLastName" required />
          </div>
          <div class="form-group">
            <label for="regPhone">Phone (Optional)</label>
            <input type="tel" id="regPhone" />
          </div>
          <button type="submit" class="btn">Register</button>
        </form>
      </div>
    </div>

    <!-- JavaScript -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
      // Global variables
      let currentUser = null;
      let cart = [];
      let products = [];
      let categories = [];

      // Initialize application
      $(document).ready(function () {
        checkSession();
        loadCategories();
        loadProducts();
        loadCart();
      });

      // Section navigation
      function showSection(sectionId) {
        $("section").removeClass("active");
        $("#" + sectionId).addClass("active");
        $("nav a").removeClass("active");
        $("nav a").each(function () {
          if (
            $(this).text().toLowerCase().includes(sectionId) ||
            (sectionId === "home" && $(this).text() === "Home") ||
            (sectionId === "admin" && $(this).text() === "Admin Panel")
          ) {
            $(this).addClass("active");
          }
        });

        // Load section-specific content
        if (sectionId === "account" && currentUser) {
          loadAccountInfo();
        }
      }

      // Modal functions
      function showModal(modalId) {
        $("#" + modalId).addClass("active");
      }

      function closeModal(modalId) {
        $("#" + modalId).removeClass("active");
        $("#" + modalId + " form")[0].reset();
        $("#" + modalId + "Message").html("");
      }

      // Check session
      function checkSession() {
        $.ajax({
          url: "../server/checkSession.php",
          type: "GET",
          dataType: "json",
          success: function (response) {
            if (response.success && response.data) {
              currentUser = response.data;
              updateUIForLoggedInUser();
            }
          },
        });
      }

      // Login function
      function login(event) {
        event.preventDefault();

        const username = $("#loginUsername").val();
        const password = $("#loginPassword").val();

        $.ajax({
          url: "../server/login.php",
          type: "POST",
          data: {
            username: username,
            password: password,
          },
          dataType: "json",
          success: function (response) {
            if (response.success) {
              currentUser = response.data;
              updateUIForLoggedInUser();
              closeModal("loginModal");
              showMessage("Login successful!", "success");
            } else {
              $("#loginMessage").html(
                '<div class="alert alert-error">' + response.message + "</div>"
              );
            }
          },
          error: function () {
            $("#loginMessage").html(
              '<div class="alert alert-error">An error occurred. Please try again.</div>'
            );
          },
        });
      }

      // Register function
      function register(event) {
        event.preventDefault();

        const formData = {
          username: $("#regUsername").val(),
          email: $("#regEmail").val(),
          password: $("#regPassword").val(),
          firstName: $("#regFirstName").val(),
          lastName: $("#regLastName").val(),
          phone: $("#regPhone").val(),
        };

        $.ajax({
          url: "../server/register.php",
          type: "POST",
          data: formData,
          dataType: "json",
          success: function (response) {
            if (response.success) {
              closeModal("registerModal");
              showModal("loginModal");
              $("#loginMessage").html(
                '<div class="alert alert-success">Registration successful! Please login.</div>'
              );
            } else {
              $("#registerMessage").html(
                '<div class="alert alert-error">' + response.message + "</div>"
              );
            }
          },
          error: function () {
            $("#registerMessage").html(
              '<div class="alert alert-error">An error occurred. Please try again.</div>'
            );
          },
        });
      }

      // Logout function
      function logout() {
        $.ajax({
          url: "../server/logout.php",
          type: "POST",
          dataType: "json",
          success: function (response) {
            currentUser = null;
            updateUIForLoggedOutUser();
            showSection("home");
            showMessage("Logged out successfully", "success");
          },
        });
      }

      // Update UI for logged in user
      function updateUIForLoggedInUser() {
        $("#userDisplay").text("Welcome, " + currentUser.firstName);
        $("#loginBtn, #registerBtn").hide();
        $("#logoutBtn").show();

        if (currentUser.userType === "staff") {
          $("#adminLink").show();
        }
      }

      // Update UI for logged out user
      function updateUIForLoggedOutUser() {
        $("#userDisplay").text("Welcome, Guest");
        $("#loginBtn, #registerBtn").show();
        $("#logoutBtn, #adminLink").hide();
      }

      // Load categories
      function loadCategories() {
        $.ajax({
          url: "../server/getCategories.php",
          type: "GET",
          dataType: "json",
          success: function (response) {
            if (response.success) {
              categories = response.data;
              populateCategoryFilter();
              displayFeaturedCategories();
            }
          },
        });
      }

      // Populate category filter
      function populateCategoryFilter() {
        const select = $("#categoryFilter");
        select.html('<option value="">All Categories</option>');
        categories.forEach(function (category) {
          select.append(
            `<option value="${category.category_id}">${category.category_name}</option>`
          );
        });
      }

      // Display featured categories
      function displayFeaturedCategories() {
        const container = $("#featuredCategories");
        container.empty();

        categories.slice(0, 6).forEach(function (category) {
          const card = `
                    <div class="product-card" onclick="showSection('products'); filterByCategory(${
                      category.category_id
                    })">
                        <div class="product-image">üì¶</div>
                        <div class="product-info">
                            <div class="product-name">${category.category_name}</div>
                            <p>${category.description || "Explore our eco-friendly products"}</p>
                        </div>
                    </div>
                `;
          container.append(card);
        });
      }

      // Load products
      function loadProducts() {
        $("#productsLoading").addClass("active");

        $.ajax({
          url: "../server/getProducts.php",
          type: "GET",
          dataType: "json",
          success: function (response) {
            $("#productsLoading").removeClass("active");
            if (response.success) {
              products = response.data;
              displayProducts(products);
            }
          },
          error: function () {
            $("#productsLoading").removeClass("active");
            showMessage("Failed to load products", "error");
          },
        });
      }

      // Display products
      function displayProducts(productsToShow) {
        const container = $("#productGrid");
        container.empty();

        if (productsToShow.length === 0) {
          container.html("<p>No products found.</p>");
          return;
        }

        productsToShow.forEach(function (product) {
          const ecoStars = "‚≠ê".repeat(product.eco_rating || 5);
          const card = `
                    <div class="product-card">
                        <div class="product-image">üåø</div>
                        <div class="product-info">
                            <div class="product-name">${product.product_name}</div>
                            <div class="product-price">${parseFloat(product.price).toFixed(2)}</div>
                            <div class="eco-rating">Eco Rating: ${ecoStars}</div>
                            <div class="product-stock">Stock: ${product.stock_quantity}</div>
                            <button class="btn" onclick="addToCart(${
                              product.product_id
                            })">Add to Cart</button>
                        </div>
                    </div>
                `;
          container.append(card);
        });
      }

      // Search products
      function searchProducts() {
        const searchTerm = $("#searchInput").val().toLowerCase();
        const filteredProducts = products.filter(function (product) {
          return (
            product.product_name.toLowerCase().includes(searchTerm) ||
            (product.description && product.description.toLowerCase().includes(searchTerm))
          );
        });
        displayProducts(filteredProducts);
      }

      // Filter by category
      function filterByCategory(categoryId) {
        if (categoryId) {
          $("#categoryFilter").val(categoryId);
        }

        const selectedCategory = $("#categoryFilter").val();
        if (!selectedCategory) {
          displayProducts(products);
        } else {
          const filteredProducts = products.filter(function (product) {
            return product.category_id == selectedCategory;
          });
          displayProducts(filteredProducts);
        }
      }

      // Cart functions
      function loadCart() {
        $.ajax({
          url: "../server/getCart.php",
          type: "GET",
          dataType: "json",
          success: function (response) {
            if (response.success) {
              cart = response.data || [];
              updateCartDisplay();
            }
          },
        });
      }

      function addToCart(productId) {
        $.ajax({
          url: "../server/addToCart.php",
          type: "POST",
          data: { productId: productId },
          dataType: "json",
          success: function (response) {
            if (response.success) {
              loadCart();
              showMessage("Product added to cart!", "success");
            } else {
              showMessage(response.message, "error");
            }
          },
        });
      }

      function updateCartDisplay() {
        const cartItems = $("#cartItems");
        const cartCount = $("#cartCount");
        const cartTotal = $("#cartTotal");

        cartItems.empty();
        let total = 0;
        let count = 0;

        if (cart.length === 0) {
          cartItems.html("<p>Your cart is empty.</p>");
        } else {
          cart.forEach(function (item) {
            const itemTotal = parseFloat(item.price) * parseInt(item.quantity);
            total += itemTotal;
            count += parseInt(item.quantity);

            const cartItem = `
                        <div class="cart-item">
                            <div>
                                <strong>${item.product_name}</strong><br>
                                ${parseFloat(item.price).toFixed(2)} x ${item.quantity}
                            </div>
                            <div>
                                <button class="btn btn-danger" onclick="removeFromCart(${
                                  item.product_id
                                })">Remove</button>
                            </div>
                        </div>
                    `;
            cartItems.append(cartItem);
          });
        }

        cartCount.text(count);
        cartTotal.text(`Total: ${total.toFixed(2)}`);
      }

      function removeFromCart(productId) {
        $.ajax({
          url: "../server/removeFromCart.php",
          type: "POST",
          data: { productId: productId },
          dataType: "json",
          success: function (response) {
            if (response.success) {
              loadCart();
              showMessage("Product removed from cart", "success");
            }
          },
        });
      }

      function clearCart() {
        if (!confirm("Are you sure you want to clear your cart?")) return;

        $.ajax({
          url: "../server/clearCart.php",
          type: "POST",
          dataType: "json",
          success: function (response) {
            if (response.success) {
              loadCart();
              showMessage("Cart cleared", "success");
            }
          },
        });
      }

      function checkout() {
        if (!currentUser) {
          showMessage("Please login to checkout", "error");
          showModal("loginModal");
          return;
        }

        if (cart.length === 0) {
          showMessage("Your cart is empty", "error");
          return;
        }

        $.ajax({
          url: "../server/checkout.php",
          type: "POST",
          dataType: "json",
          success: function (response) {
            if (response.success) {
              loadCart();
              showMessage(
                "Order placed successfully! Order ID: " + response.data.orderId,
                "success"
              );
              showSection("account");
            } else {
              showMessage(response.message, "error");
            }
          },
        });
      }

      // Account functions
      function loadAccountInfo() {
        if (!currentUser) return;

        $.ajax({
          url: "../server/getAccountInfo.php",
          type: "GET",
          dataType: "json",
          success: function (response) {
            if (response.success) {
              displayAccountInfo(response.data);
            }
          },
        });
      }

      function displayAccountInfo(data) {
        const content = `
                <h3>Account Information</h3>
                <p><strong>Username:</strong> ${data.user.username}</p>
                <p><strong>Email:</strong> ${data.user.email}</p>
                <p><strong>Name:</strong> ${data.user.first_name} ${data.user.last_name}</p>
                <p><strong>Account Type:</strong> ${data.user.user_type}</p>
                
                <h3>Order History</h3>
                <div id="orderHistory"></div>
            `;
        $("#accountContent").html(content);

        if (data.orders && data.orders.length > 0) {
          let orderHtml = '<table style="width: 100%; border-collapse: collapse;">';
          orderHtml += "<tr><th>Order ID</th><th>Date</th><th>Total</th><th>Status</th></tr>";
          data.orders.forEach(function (order) {
            orderHtml += `
                        <tr>
                            <td>${order.order_id}</td>
                            <td>${new Date(order.order_date).toLocaleDateString()}</td>
                            <td>${parseFloat(order.total_amount).toFixed(2)}</td>
                            <td>${order.status}</td>
                        </tr>
                    `;
          });
          orderHtml += "</table>";
          $("#orderHistory").html(orderHtml);
        } else {
          $("#orderHistory").html("<p>No orders found.</p>");
        }
      }

      // Admin functions
      function showAdminSection(section) {
        if (!currentUser || currentUser.userType !== "staff") {
          showMessage("Unauthorized access", "error");
          return;
        }

        const workArea = $("#adminWorkArea");

        switch (section) {
          case "products":
            loadAdminProducts();
            break;
          case "users":
            loadAdminUsers();
            break;
          case "orders":
            loadAdminOrders();
            break;
          case "add-product":
            showAddProductForm();
            break;
        }
      }

      function loadAdminProducts() {
        $.ajax({
          url: "../server/adminGetProducts.php",
          type: "GET",
          dataType: "json",
          success: function (response) {
            if (response.success) {
              displayAdminProducts(response.data);
            }
          },
        });
      }

      function displayAdminProducts(products) {
        let html = "<h3>Manage Products</h3>";
        html += '<table style="width: 100%; border-collapse: collapse;">';
        html += "<tr><th>ID</th><th>Name</th><th>Price</th><th>Stock</th><th>Actions</th></tr>";

        products.forEach(function (product) {
          html += `
                    <tr>
                        <td>${product.product_id}</td>
                        <td>${product.product_name}</td>
                        <td>${parseFloat(product.price).toFixed(2)}</td>
                        <td>${product.stock_quantity}</td>
                        <td>
                            <button class="btn btn-secondary" onclick="editProduct(${
                              product.product_id
                            })">Edit</button>
                            <button class="btn btn-danger" onclick="deleteProduct(${
                              product.product_id
                            })">Delete</button>
                        </td>
                    </tr>
                `;
        });

        html += "</table>";
        $("#adminWorkArea").html(html);
      }

      function showAddProductForm() {
        const html = `
                <h3>Add New Product</h3>
                <form id="addProductForm" onsubmit="addProduct(event)">
                    <div class="form-group">
                        <label>Product Name</label>
                        <input type="text" id="newProductName" required>
                    </div>
                    <div class="form-group">
                        <label>Category</label>
                        <select id="newProductCategory" required></select>
                    </div>
                    <div class="form-group">
                        <label>Description</label>
                        <textarea id="newProductDescription" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Price</label>
                        <input type="number" id="newProductPrice" step="0.01" min="0" required>
                    </div>
                    <div class="form-group">
                        <label>Stock Quantity</label>
                        <input type="number" id="newProductStock" min="0" required>
                    </div>
                    <div class="form-group">
                        <label>Eco Rating (1-5)</label>
                        <input type="number" id="newProductRating" min="1" max="5" value="5">
                    </div>
                    <button type="submit" class="btn">Add Product</button>
                </form>
            `;
        $("#adminWorkArea").html(html);

        // Populate categories
        categories.forEach(function (category) {
          $("#newProductCategory").append(
            `<option value="${category.category_id}">${category.category_name}</option>`
          );
        });
      }

      function addProduct(event) {
        event.preventDefault();

        const productData = {
          name: $("#newProductName").val(),
          category: $("#newProductCategory").val(),
          description: $("#newProductDescription").val(),
          price: $("#newProductPrice").val(),
          stock: $("#newProductStock").val(),
          rating: $("#newProductRating").val(),
        };

        $.ajax({
          url: "../server/adminAddProduct.php",
          type: "POST",
          data: productData,
          dataType: "json",
          success: function (response) {
            if (response.success) {
              showMessage("Product added successfully!", "success");
              loadProducts();
              loadAdminProducts();
            } else {
              showMessage(response.message, "error");
            }
          },
        });
      }

      function deleteProduct(productId) {
        if (!confirm("Are you sure you want to delete this product?")) return;

        $.ajax({
          url: "../server/adminDeleteProduct.php",
          type: "POST",
          data: { productId: productId },
          dataType: "json",
          success: function (response) {
            if (response.success) {
              showMessage("Product deleted successfully", "success");
              loadProducts();
              loadAdminProducts();
            } else {
              showMessage(response.message, "error");
            }
          },
        });
      }

      // Utility functions
      function showMessage(message, type) {
        const alertClass = type === "success" ? "alert-success" : "alert-error";
        const messageHtml = `<div class="alert ${alertClass}">${message}</div>`;

        // Add message to the top of the current section
        const currentSection = $("section.active");
        currentSection.prepend(messageHtml);

        // Auto-remove after 3 seconds
        setTimeout(function () {
          currentSection
            .find(".alert")
            .first()
            .fadeOut(function () {
              $(this).remove();
            });
        }, 3000);
      }
    </script>
  </body>
</html>
